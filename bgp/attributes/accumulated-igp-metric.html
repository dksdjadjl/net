
<!doctype html>
<html lang="en-US" id="html">
<head> 
    <script src="https://www.googleoptimize.com/optimize.js?id=GTM-N6QRZFG"></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="shortcut icon" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/favicon/apple-touch-icon-180x180.png" />
	<meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1' />

<!-- Google Tag Manager for WordPress by gtm4wp.com -->
<script data-cfasync="false" data-pagespeed-no-defer>
	var gtm4wp_datalayer_name = "dataLayer";
	var dataLayer = dataLayer || [];
</script>
<!-- End Google Tag Manager for WordPress by gtm4wp.com -->
	<!-- This site is optimized with the Yoast SEO plugin v23.4 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Accumulated IGP Metric Attribute (AIGP)</title><link rel="preload" data-rocket-preload as="image" href="https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as.png" imagesrcset="https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as.png 1466w, https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as-300x226.png 300w, https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as-1024x770.png 1024w, https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as-768x577.png 768w" imagesizes="(max-width: 1466px) 100vw, 1466px" fetchpriority="high">
	<meta name="description" content="Accumulated IGP Metric Attribute (AIGP) allows BGP routers to select the best path to other ASes based on end-to-end IGP metric." />
	<link rel="canonical" href="https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Accumulated IGP Metric Attribute (AIGP)" />
	<meta property="og:description" content="Accumulated IGP Metric Attribute (AIGP) allows BGP routers to select the best path to other ASes based on end-to-end IGP metric." />
	<meta property="og:url" content="https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp" />
	<meta property="og:site_name" content="NetworkLessons.com" />
	<meta property="article:published_time" content="2020-11-24T15:32:03+00:00" />
	<meta property="article:modified_time" content="2023-12-13T14:47:33+00:00" />
	<meta property="og:image" content="https://cdn.networklessons.com/wp-content/uploads/2020/11/abstract-background-dotted-grid-e1633735736291.jpg" />
	<meta property="og:image:width" content="2000" />
	<meta property="og:image:height" content="2000" />
	<meta property="og:image:type" content="image/jpeg" />
	<meta name="author" content="Rene Molenaar" />
	<meta name="twitter:label1" content="Written by" />
	<meta name="twitter:data1" content="Rene Molenaar" />
	<meta name="twitter:label2" content="Est. reading time" />
	<meta name="twitter:data2" content="9 minutes" />
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebPage","@id":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp","url":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp","name":"Accumulated IGP Metric Attribute (AIGP)","isPartOf":{"@id":"https://networklessons.com/#website"},"primaryImageOfPage":{"@id":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp#primaryimage"},"image":{"@id":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp#primaryimage"},"thumbnailUrl":"https://cdn.networklessons.com/wp-content/uploads/2020/11/abstract-background-dotted-grid-e1633735736291.jpg","datePublished":"2020-11-24T15:32:03+00:00","dateModified":"2023-12-13T14:47:33+00:00","author":{"@id":"https://networklessons.com/#/schema/person/a210ceb8a2b14b76e03c27d3c65850c2"},"description":"Accumulated IGP Metric Attribute (AIGP) allows BGP routers to select the best path to other ASes based on end-to-end IGP metric.","breadcrumb":{"@id":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp"]}]},{"@type":"ImageObject","inLanguage":"en-US","@id":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp#primaryimage","url":"https://cdn.networklessons.com/wp-content/uploads/2020/11/abstract-background-dotted-grid-e1633735736291.jpg","contentUrl":"https://cdn.networklessons.com/wp-content/uploads/2020/11/abstract-background-dotted-grid-e1633735736291.jpg","width":2000,"height":2000,"caption":"Abstract Background Dotted Grid"},{"@type":"BreadcrumbList","@id":"https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Networklessons.com","item":"https://networklessons.com/"},{"@type":"ListItem","position":2,"name":"BGP","item":"https://networklessons.com/bgp"},{"@type":"ListItem","position":3,"name":"Accumulated IGP Metric Attribute (AIGP)"}]},{"@type":"WebSite","@id":"https://networklessons.com/#website","url":"https://networklessons.com/","name":"NetworkLessons.com","description":"","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://networklessons.com/?s={search_term_string}"},"query-input":{"@type":"PropertyValueSpecification","valueRequired":true,"valueName":"search_term_string"}}],"inLanguage":"en-US"},{"@type":"Person","@id":"https://networklessons.com/#/schema/person/a210ceb8a2b14b76e03c27d3c65850c2","name":"Rene Molenaar","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https://networklessons.com/#/schema/person/image/","url":"https://secure.gravatar.com/avatar/d676347ef395e3b3a6a056aaf5546311?s=96&d=mm&r=g","contentUrl":"https://secure.gravatar.com/avatar/d676347ef395e3b3a6a056aaf5546311?s=96&d=mm&r=g","caption":"Rene Molenaar"},"description":"René - CCIE #41726 is the creator of Networklessons.com where he writes about networking topics like Cisco, Routing, Switching, Linux, Wireless &amp; Security. He also created GNS3Vault.com where people can study Cisco labs for free.","sameAs":["https://networklessons.com"]}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel='dns-prefetch' href='//player.vimeo.com' />
<link rel='dns-prefetch' href='//cdn.networklessons.com' />
<link rel='dns-prefetch' href='//googletagmanager.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//googleoptimize.com' />
<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//tag.getdrip.com' />
<link rel='dns-prefetch' href='//facebook.com' />

<link href='https://cdn.networklessons.com' rel='preconnect' />
<link rel='stylesheet' id='mp-theme-css' href='https://cdn.networklessons.com/wp-content/plugins/memberpress/css/ui/theme.css?ver=1.11.34' type='text/css' media='all' />
<style id='wp-emoji-styles-inline-css' type='text/css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel='stylesheet' id='wp-block-library-css' href='https://cdn.networklessons.com/wp-includes/css/dist/block-library/style.min.css?ver=6.6.2' type='text/css' media='all' />
<style id='safe-svg-svg-icon-style-inline-css' type='text/css'>
.safe-svg-cover{text-align:center}.safe-svg-cover .safe-svg-inside{display:inline-block;max-width:100%}.safe-svg-cover svg{height:100%;max-height:100%;max-width:100%;width:100%}

</style>
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}
</style>
<link rel='stylesheet' id='arve-css' href='https://cdn.networklessons.com/wp-content/plugins/advanced-responsive-video-embedder/build/main.css?ver=755e5bf2bfafc15e7cc1' type='text/css' media='all' />
<link rel='stylesheet' id='arve-pro-css' href='https://cdn.networklessons.com/wp-content/plugins/arve-pro/build/main.css?ver=eea34735566740155d0f' type='text/css' media='all' />
<link rel='stylesheet' id='emnl-custom-styling-various-plugins-css' href='https://cdn.networklessons.com/wp-content/plugins/emnl-custom-css-various-plugins/emnl-custom-css-various-plugins.css?ver=1720772937' type='text/css' media='all' />
<link rel='stylesheet' id='affwp-forms-css' href='https://cdn.networklessons.com/wp-content/plugins/affiliate-wp/assets/css/forms.min.css?ver=2.26.0' type='text/css' media='all' />
<link rel='stylesheet' id='ez-toc-css' href='https://cdn.networklessons.com/wp-content/plugins/easy-table-of-contents/assets/css/screen.min.css?ver=2.0.69.1' type='text/css' media='all' />
<style id='ez-toc-inline-css' type='text/css'>
div#ez-toc-container .ez-toc-title {font-size: 100%;}div#ez-toc-container .ez-toc-title {font-weight: 700;}div#ez-toc-container ul li {font-size: 100%;}div#ez-toc-container ul li {font-weight: 500;}div#ez-toc-container nav ul ul li {font-size: 90%;}div#ez-toc-container {background: #f9f9f9;border: 1px solid #e6e6e6;}div#ez-toc-container p.ez-toc-title , #ez-toc-container .ez_toc_custom_title_icon , #ez-toc-container .ez_toc_custom_toc_icon {color: #000000;}div#ez-toc-container ul.ez-toc-list a {color: #5381b5;}div#ez-toc-container ul.ez-toc-list a:hover {color: #5381b5;}div#ez-toc-container ul.ez-toc-list a:visited {color: #5381b5;}
.ez-toc-container-direction {direction: ltr;}.ez-toc-counter ul{counter-reset: item ;}.ez-toc-counter nav ul li a::before {content: counters(item, '.', decimal) '. ';display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left; }.ez-toc-widget-direction {direction: ltr;}.ez-toc-widget-container ul{counter-reset: item ;}.ez-toc-widget-container nav ul li a::before {content: counters(item, '.', decimal) '. ';display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left; }
</style>
<link rel='stylesheet' id='if-menu-site-css-css' href='https://cdn.networklessons.com/wp-content/plugins/if-menu/assets/if-menu-site.css?ver=6.6.2' type='text/css' media='all' />
<link rel='stylesheet' id='networklessons-style-css' href='https://cdn.networklessons.com/wp-content/themes/networklessons/dist/app.css?ver=1724843461' type='text/css' media='all' />
<link rel='stylesheet' id='magnific-popup-style-css' href='https://cdn.networklessons.com/wp-content/themes/networklessons/dist/magnific-popup/magnific-popup.css?ver=1.1.0' type='text/css' media='all' />
<link rel='stylesheet' id='bellows-css' href='https://cdn.networklessons.com/wp-content/plugins/bellows-pro/pro/assets/css/bellows.min.css?ver=1.4.3' type='text/css' media='all' />
<script type="text/javascript" src="https://cdn.networklessons.com/wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<script type="text/javascript" id="jquery-cookie-js-extra">
/* <![CDATA[ */
var affwp_scripts = {"ajaxurl":"https:\/\/networklessons.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/plugins/affiliate-wp/assets/js/jquery.cookie.min.js?ver=1.4.0" id="jquery-cookie-js"></script>
<script type="text/javascript" id="affwp-tracking-js-extra">
/* <![CDATA[ */
var affwp_debug_vars = {"integrations":{"memberpress":"MemberPress"},"version":"2.26.0","currency":"USD","ref_cookie":"affwp_ref","visit_cookie":"affwp_ref_visit_id","campaign_cookie":"affwp_campaign"};
/* ]]> */
</script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/plugins/affiliate-wp/assets/js/tracking.min.js?ver=2.26.0" id="affwp-tracking-js"></script>
<link rel="https://api.w.org/" href="https://networklessons.com/wp-json/" /><link rel="alternate" title="JSON" type="application/json" href="https://networklessons.com/wp-json/wp/v2/posts/64453" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://networklessons.com/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 6.6.2" />
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="https://networklessons.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fnetworklessons.com%2Fbgp%2Faccumulated-igp-metric-attribute-aigp" />
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="https://networklessons.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fnetworklessons.com%2Fbgp%2Faccumulated-igp-metric-attribute-aigp&#038;format=xml" />
<style id="bellows-custom-generated-css">

/** Bellows Custom Tweaks (General Settings) **/

/** Bellows Custom Tweaks (General Settings) **/
/* More compact look of menu */
.bellows .bellows-nav * { line-height: 1.75em; }
.bellows .bellows-nav .bellows-submenu .bellows-target { padding-left: 20px;}
.bellows .bellows-nav .bellows-target,
.bellows .bellows-nav .bellows-submenu .bellows-target { padding: 2px;}

/* Move toggle icons to left instead of right of text labels */
.bellows .bellows-nav .bellows-subtoggle { width: 30px; left:0; }
.bellows .bellows-nav .bellows-menu-item > .bellows-target > .bellows-target-text { margin-left: 30px; }
.bellows .bellows-nav .bellows-subtoggle .fa { top: 40%; }

/* Move toggle icons and lower level items to the right */
.bellows .bellows-nav .bellows-submenu .bellows-item-level-1 .bellows-subtoggle { left: 25px; }
.bellows .bellows-nav .bellows-submenu .bellows-item-level-1 .bellows-target { padding-left: 25px; }

.bellows .bellows-nav .bellows-submenu .bellows-item-level-2 .bellows-subtoggle { left: 50px; }
.bellows .bellows-nav .bellows-submenu .bellows-item-level-2 .bellows-target { padding-left: 50px; }


/* SIDEBAR ONLY STYLING */

/* Set all text to default black */
#sidebar .bellows .bellows-nav a.bellows-target { color: #000000 }

/* Set parent menu items bold and colored */
#sidebar .bellows.bellows-main .bellows-nav .bellows-current-menu-item > .bellows-target,
#sidebar .bellows.bellows-main .bellows-nav .bellows-current-menu-ancestor > .bellows-target { color:#557fae; font-weight: bold; }

/* Set current post bold and colored */
#sidebar .bellows .bellows-current-menu-item { font-weight: bold; color:#557fae; }

/* Toggle icons on same height */
#sidebar .bellows .bellows-nav .bellows-subtoggle .fa { top: 44%; }



/* Status: Loaded from Transient */

</style>		<script type="text/javascript">
		var AFFWP = AFFWP || {};
		AFFWP.referral_var = 'affid';
		AFFWP.expiration = 1;
		AFFWP.debug = 0;


		AFFWP.referral_credit_last = 0;
		</script>

<!-- Google Tag Manager for WordPress by gtm4wp.com -->
<!-- GTM Container placement set to manual -->
<script data-cfasync="false" data-pagespeed-no-defer type="text/javascript">
	var dataLayer_content = {"visitorLoginState":"logged-in","visitorType":"subscriber","visitorEmail":"harthomp@protonmail.com","visitorEmailHash":"30617de159321682ca448e5d89fc5cae66131a43cdfff8865f5d749c58146885","visitorId":65289,"visitorIP":"203.63.201.230","pagePostType":"post","pagePostType2":"single-post","pageCategory":["bgp","ccie-enterprise-infrastructure"],"IsActiveMember":"true","UserFullName":"Harrison Thompson buckley"};
	dataLayer.push( dataLayer_content );
</script>
<script>
		if (typeof gtag == "undefined") {
			function gtag(){dataLayer.push(arguments);}
		}

		gtag("consent", "default", {
			"analytics_storage": "granted",
			"ad_storage": "granted",
			"ad_user_data": "granted",
			"ad_personalization": "granted",
			"functionality_storage": "granted",
			"security_storage": "granted",
			"personalization_storage": "granted",
		});
</script>
<script data-cfasync="false">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NWFSBS');
</script>
<!-- End Google Tag Manager for WordPress by gtm4wp.com --><link rel="apple-touch-icon" sizes="180x180" href="/wp-content/uploads/fbrfg/apple-touch-icon.png?v=69P4gG4Gpq">
<link rel="icon" type="image/png" sizes="32x32" href="/wp-content/uploads/fbrfg/favicon-32x32.png?v=69P4gG4Gpq">
<link rel="icon" type="image/png" sizes="16x16" href="/wp-content/uploads/fbrfg/favicon-16x16.png?v=69P4gG4Gpq">
<link rel="manifest" href="/wp-content/uploads/fbrfg/site.webmanifest?v=69P4gG4Gpq">
<link rel="mask-icon" href="/wp-content/uploads/fbrfg/safari-pinned-tab.svg?v=69P4gG4Gpq" color="#5381b5">
<link rel="shortcut icon" href="/wp-content/uploads/fbrfg/favicon.ico?v=69P4gG4Gpq">
<meta name="msapplication-TileColor" content="#5381b5">
<meta name="msapplication-config" content="/wp-content/uploads/fbrfg/browserconfig.xml?v=69P4gG4Gpq">
<meta name="theme-color" content="#5381b5">		<style>
			.algolia-search-highlight {
				background-color: #fffbcc;
				border-radius: 2px;
				font-style: normal;
			}
		</style>
		<script type="application/ld+json" class="emnl-schema-breadcrumbs">{"@context": "https://schema.org","@type": "BreadcrumbList","itemListElement": [{"@type": "ListItem","position": 0,"name": "Home","item": "https://networklessons.com"},{"@type": "ListItem","position": 1,"name": "BGP","item": "https://networklessons.com/bgp"},{"@type": "ListItem","position": 2,"name": "Accumulated IGP Metric Attribute (AIGP)","item": "https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp"}]}</script>
</head>


<body class="post-template-default single single-post postid-64453 single-format-standard logged-in" data-theme="light">

<!-- GTM Container placement set to manual -->
<!-- Google Tag Manager (noscript) -->
				<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NWFSBS" height="0" width="0" style="display:none;visibility:hidden" aria-hidden="true"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><script>
  if ( localStorage.getItem('siteTheme') ) {
    document.body.setAttribute('data-theme', localStorage.getItem('siteTheme'));
  }
</script>
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#main">Skip to content</a>
	<header class="site-header">
		        <div class="site-header-inner">
            <div class="container">
                <div class="row sm-gutters main-row">
                    <div class="col-lg-4 col-8">
                        <a href="https://networklessons.com/" class="logo">
                            <img width="524" height="141" src="https://cdn.networklessons.com/wp-content/themes/networklessons/assets/images/logo.svg" alt="NetworkLessons.com" />
                        </a>
                    </div>
                                                                <div class="col-lg-8 col-4 col-navigation">
                            <nav id="site-navigation" class="main-navigation">
                                <div class="menu-primary-container"><ul id="primary-menu" class="menu"><li id="menu-item-10143" class="expanded menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-10143"><a href="https://networklessons.com/courses">Courses <span class="menu-item-toggle"></span></a>
<ul class="sub-menu">
	<li id="menu-item-59830" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-59830"><a href="https://networklessons.com/cisco">Cisco <span class="menu-item-toggle"></span></a>
	<ul class="sub-menu">
		<li id="menu-item-65214" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65214"><a href="https://networklessons.com/cisco/ccna-200-301">CCNA 200-301</a></li>
		<li id="menu-item-65219" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65219"><a href="https://networklessons.com/cisco/ccnp-encor-350-401">CCNP ENCOR 350-401 v1.1</a></li>
		<li id="menu-item-65218" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65218"><a href="https://networklessons.com/cisco/ccnp-enarsi-300-410">CCNP ENARSI 300-410 v1.1</a></li>
		<li id="menu-item-65217" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65217"><a href="https://networklessons.com/cisco/ccie-enterprise-infrastructure">CCIE Enterprise Infrastructure</a></li>
		<li id="menu-item-65216" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65216"><a href="https://networklessons.com/cisco/asa-firewall">ASA Firewall</a></li>
		<li id="menu-item-65774" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65774"><a href="https://networklessons.com/cisco/cisco-sd-wan">Cisco SD-WAN</a></li>
	</ul>
</li>
	<li id="menu-item-59831" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-59831"><a href="https://networklessons.com/routing-switching">Routing &#038; Switching <span class="menu-item-toggle"></span></a>
	<ul class="sub-menu">
		<li id="menu-item-65232" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65232"><a href="https://networklessons.com/subnetting">Subnetting</a></li>
		<li id="menu-item-65233" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65233"><a href="https://networklessons.com/switching">Switching</a></li>
		<li id="menu-item-65231" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65231"><a href="https://networklessons.com/spanning-tree">Spanning-Tree</a></li>
		<li id="menu-item-65222" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65222"><a href="https://networklessons.com/frame-relay">Frame-Relay</a></li>
		<li id="menu-item-65230" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65230"><a href="https://networklessons.com/rip">RIP</a></li>
		<li id="menu-item-65221" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65221"><a href="https://networklessons.com/eigrp">EIGRP</a></li>
		<li id="menu-item-65227" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65227"><a href="https://networklessons.com/ospf">OSPF</a></li>
		<li id="menu-item-65224" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65224"><a href="https://networklessons.com/is-is">IS-IS</a></li>
		<li id="menu-item-65215" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65215"><a href="https://networklessons.com/bgp">BGP</a></li>
		<li id="menu-item-65226" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65226"><a href="https://networklessons.com/multicast">Multicast</a></li>
		<li id="menu-item-65223" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65223"><a href="https://networklessons.com/ipv6">IPv6</a></li>
		<li id="menu-item-65229" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65229"><a href="https://networklessons.com/quality-of-service">Quality of Service</a></li>
		<li id="menu-item-65225" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65225"><a href="https://networklessons.com/mpls">MPLS</a></li>
	</ul>
</li>
	<li id="menu-item-73291" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-73291"><a href="#">Data Center <span class="menu-item-toggle"></span></a>
	<ul class="sub-menu">
		<li id="menu-item-73294" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-73294"><a href="https://networklessons.com/vxlan">VXLAN</a></li>
	</ul>
</li>
	<li id="menu-item-65228" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65228"><a href="https://networklessons.com/python">Python</a></li>
	<li id="menu-item-65234" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-65234"><a href="https://networklessons.com/uncategorized">Miscellaneous</a></li>
	<li id="menu-item-70698" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-70698"><a href="https://networklessons.com/labs">Labs</a></li>
	<li id="menu-item-64907" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-64907"><a href="#">Legacy <span class="menu-item-toggle"></span></a>
	<ul class="sub-menu">
		<li id="menu-item-33774" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-33774"><a href="https://networklessons.com/cisco/ccna-routing-switching-icnd1-100-105">CCNA R&#038;S ICND1 100-105</a></li>
		<li id="menu-item-40575" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-40575"><a href="https://networklessons.com/cisco/ccna-routing-switching-icnd2-200-105">CCNA R&#038;S ICND2 200-105</a></li>
		<li id="menu-item-20090" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20090"><a href="https://networklessons.com/cisco/ccnp-route">CCNP ROUTE</a></li>
		<li id="menu-item-20092" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20092"><a href="https://networklessons.com/cisco/ccnp-switch">CCNP SWITCH</a></li>
		<li id="menu-item-20093" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20093"><a href="https://networklessons.com/cisco/ccnp-tshoot">CCNP TSHOOT</a></li>
		<li id="menu-item-20089" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20089"><a href="https://networklessons.com/cisco/ccie-routing-switching">CCIE R&#038;S</a></li>
		<li id="menu-item-38428" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-38428"><a href="https://networklessons.com/cisco/ccie-routing-switching-written">CCIE R&#038;S Written</a></li>
		<li id="menu-item-65220" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-65220"><a href="https://networklessons.com/cisco/evolving-technologies">Evolving Technologies</a></li>
	</ul>
</li>
	<li id="menu-item-8339" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8339"><a href="https://networklessons.com/new-lessons"><i class="fa fa-plus"></i> New Lessons</a></li>
	<li id="menu-item-64135" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-64135"><a href="https://networklessons.com/updated-lessons"><i class="fas fa-pen"></i> Updated Lessons</a></li>
	<li id="menu-item-7347" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7347"><a href="https://networklessons.com/member-ideas"><i class="fa fa-lightbulb"></i> Lesson Ideas</a></li>
</ul>
</li>
<li id="menu-item-8715" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8715"><a href="https://forum.networklessons.com">Forum</a></li>
<li id="menu-item-23483" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-23483"><a href="https://networklessons.com/support">Support</a></li>
<li id="menu-item-65967" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-65967"><a href="#">Tools <span class="menu-item-toggle"></span></a>
<ul class="sub-menu">
	<li id="menu-item-65968" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-65968"><a href="https://www.cloudshark.org/collections/WTRpgLI-GQSDfgzkQixICg">Packet Captures</a></li>
	<li id="menu-item-65969" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-65969"><a href="https://notes.networklessons.com">Notes</a></li>
	<li id="menu-item-65970" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-65970"><a href="https://networklessons.com/tools-and-resources">Resources</a></li>
	<li id="menu-item-68327" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-68327"><a href="https://networklessons.com/networklessons-exams">Practice Exams</a></li>
</ul>
</li>
<li id="menu-item-22148" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-22148"><a href="#"><i class="fa fa-user"></i> <span class="menu-item-toggle"></span></a>
<ul class="sub-menu">
	<li id="menu-item-5629" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5629"><a href="https://networklessons.com/myaccount">My Account Settings</a></li>
	<li id="menu-item-68092" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-68092"><a href="https://networklessons.com/member-dashboard">Member Dashboard</a></li>
	<li id="menu-item-22285" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-22285"><a href="https://networklessons.com/upgrade-to-annual-membership"><b><font color="#FFC469">UPGRADE TO ANNUAL &#038; Get 2 Months FREE!</font></b></a></li>
	<li id="menu-item-56969" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-56969"><a href="https://networklessons.com/wp-login.php?action=logout">Logout</a></li>
</ul>
</li>
</ul></div>                                <div class="main-navigation-close">
                                    <i class="far fa-times"></i>
                                </div>
                            </nav>
                            <div class="main-navigation-toggle">
                                <span class="icon"></span>
                            </div>
                            <div class="d-none d-xl-block">
                                

<form role="search" method="get" class="search-form" action="https://networklessons.com/">
    <label for="search-form-66e2ed89c3751" class="sr-only">
        <span class="screen-reader-text">Search for:</span>
    </label>

    <div class="input-group">
        <input type="search" id="search-form-66e2ed89c3751" class="search-field form-control" placeholder="Search &hellip;" value="" name="s" />
        <div class="input-group-append">
            <button type="submit" class="search-submit btn btn-white">
                <span class="screen-reader-text">Search</span>
                <i class="far fa-search"></i>
            </button>
        </div>
    </div>
</form>                            </div>
                        </div>
                                    </div>
            </div>
        </div>
        <div class="fullpage-overlay main-navigation-overlay"></div>
	</header>
    
            <div class="d-xl-none">
            

<form role="search" method="get" class="search-form" action="https://networklessons.com/">
    <label for="search-form-66e2ed89c37be" class="sr-only">
        <span class="screen-reader-text">Search for:</span>
    </label>

    <div class="input-group">
        <input type="search" id="search-form-66e2ed89c37be" class="search-field form-control" placeholder="Search &hellip;" value="" name="s" />
        <div class="input-group-append">
            <button type="submit" class="search-submit btn btn-white">
                <span class="screen-reader-text">Search</span>
                <i class="far fa-search"></i>
            </button>
        </div>
    </div>
</form>        </div>
    
	<div class="site-content container">
    <div class="breadcrumbs" style="font-size: 12px;">You are here: <a href="https://networklessons.com">Home</a> » <a href="https://networklessons.com/bgp">BGP</a></div>	<div class="site-content-row row">
	<div id="primary" class="content-area col-md-8">
		<main id="main" class="site-main">
                            <div class="site-actions-toolbar d-md-none">
                    <div class="site-action js--dark-mode">
                        <i class="far fa-adjust"></i>
                    </div>
                </div>
            
		
<article id="post-64453" class="main-post post-64453 post type-post status-publish format-standard has-post-thumbnail hentry category-bgp category-ccie-enterprise-infrastructure">
	<header class="entry-header">
                            <h1 class="entry-title">Accumulated IGP Metric Attribute (AIGP)</h1>        	</header>
	<div class="entry-content">
                    <div class="the-content">
                <div id="ez-toc-container" class="ez-toc-v2_0_69_1 counter-hierarchy ez-toc-counter ez-toc-custom ez-toc-container-direction">
<div class="ez-toc-title-container"><p class="ez-toc-title">Lesson Contents</p>
</div><nav><ul class='ez-toc-list ez-toc-list-level-1 ' ><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-1" href="#Configuration" title="Configuration">Configuration</a><ul class='ez-toc-list-level-3' ><li class='ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-2" href="#Default_BGP" title="Default BGP">Default BGP</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-3" href="#From_AS_123_to_AS_456" title="From AS 123 to AS 456">From AS 123 to AS 456</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-4" href="#From_AS_456_to_AS_123" title="From AS 456 to AS 123">From AS 456 to AS 123</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-5" href="#BGP_MED" title="BGP MED">BGP MED</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-6" href="#MED_Configuration" title="MED Configuration">MED Configuration</a><ul class='ez-toc-list-level-5' ><li class='ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-7" href="#AS_123" title="AS 123">AS 123</a></li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class="ez-toc-link ez-toc-heading-8" href="#AS_456" title="AS 456">AS 456</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-9" href="#From_AS_123_to_AS_456-2" title="From AS 123 to AS 456">From AS 123 to AS 456</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-10" href="#From_AS_456_to_AS_123-2" title="From AS 456 to AS 123">From AS 456 to AS 123</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-11" href="#AIGP" title="AIGP">AIGP</a><ul class='ez-toc-list-level-4' ><li class='ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-12" href="#AS_123_to_AS_456" title="AS 123 to AS 456">AS 123 to AS 456</a></li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class="ez-toc-link ez-toc-heading-13" href="#AS_456_to_AS_123" title="AS 456 to AS 123">AS 456 to AS 123</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-3'><a class="ez-toc-link ez-toc-heading-14" href="#BGP_Path_Selection_Algorithm_Changes" title="BGP Path Selection Algorithm Changes">BGP Path Selection Algorithm Changes</a></li></ul></li><li class='ez-toc-page-1 ez-toc-heading-level-2'><a class="ez-toc-link ez-toc-heading-15" href="#Conclusion" title="Conclusion">Conclusion</a></li></ul></nav></div>
<p>In large networks, you may encounter network designs where the network is under a<strong> single administrative authority</strong> but divided into multiple ASes, each with its own IGP.</p>
<p><img fetchpriority="high" decoding="async" class="alignnone size-full wp-image-64463" src="https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as.png" alt="Company Network Multiple Bgp As" width="1466" height="1102" srcset="https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as.png 1466w, https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as-300x226.png 300w, https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as-1024x770.png 1024w, https://cdn.networklessons.com/wp-content/uploads/2020/11/company-network-multiple-bgp-as-768x577.png 768w" sizes="(max-width: 1466px) 100vw, 1466px" /></p>
<p>Why do we see networks designed like this? There are several reasons:</p>
<ul>
<li>The IGP doesn&#8217;t scale for a network of this size.</li>
<li>One company bought another company, and they haven&#8217;t merged their ASes (yet).</li>
<li>Each business division has a separate network.</li>
<li>You require a specific routing policy that you can&#8217;t do with an IGP.</li>
<li>You use BGP confederations.</li>
<li>You use seamless MPLS.</li>
</ul>
<p>A network with multiple IGPs and BGP in between instead of a single IGP introduces a potential problem. BGP selects a path using the <a href="https://networklessons.com/bgp/bgp-attributes-and-path-selection">best path selection algorithm</a>, which isn&#8217;t based on a &#8220;lowest metric&#8221; as IGPs do. What happens is that your router will <strong>sometimes select sub-optimal paths</strong> in your network.</p>
<p><img decoding="async" class="alignnone size-full wp-image-64464" src="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-sub-optimal-routing.png" alt="Bgp Aigp Sub Optimal Routing" width="1466" height="1100" srcset="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-sub-optimal-routing.png 1466w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-sub-optimal-routing-300x225.png 300w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-sub-optimal-routing-1024x768.png 1024w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-sub-optimal-routing-768x576.png 768w" sizes="(max-width: 1466px) 100vw, 1466px" /></p>
<p>The routers above don&#8217;t have any inside metric information about the other ASes. AS 1 can&#8217;t know that somewhere inside AS 3, there are slow and fast links.</p>
<p>The solution to this problem is to use a <a href="https://networklessons.com/bgp/bgp-attributes-and-path-selection">BGP attribute</a> named <strong>Accumulated IGP Metric Attribute (AIGP)</strong>.</p>
<p>AIGP is a non-transitive attribute that includes the <strong>accumulated IGP metric</strong>. BGP routers advertise this AIGP metric to neighbors in other ASes. This allows BGP routers to <strong>select the best path based on the end-to-end IGP metric</strong>.</p>
<p><img decoding="async" class="alignnone size-full wp-image-64465" src="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-optimal-routing.png" alt="Bgp Aigp Optimal Routing" width="1466" height="1097" srcset="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-optimal-routing.png 1466w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-optimal-routing-300x224.png 300w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-optimal-routing-1024x766.png 1024w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-optimal-routing-768x575.png 768w" sizes="(max-width: 1466px) 100vw, 1466px" /></p>
<p>To make this possible, AIGP makes some changes to the BGP best-path algorithm.</p>
<p>Once you enable AIGP, BGP will check the AIGP metric <strong>right after step 3 (originate)</strong>. This means we use the AIGP metric as a tie-breaker before other important attributes like the AS path length or MED.</p>
<div class="notice-box  note   ">If you use AIGP, you have to use the same IGP. Each IGP uses a different metric, so when you use different IGPs, the AIGP metric won&#8217;t make any sense.</div>
<p>In this lesson, I&#8217;ll show you a &#8220;before&#8221; and &#8220;after&#8221; scenario. In the &#8220;before&#8221; scenario, we look at a network that doesn&#8217;t use AIGP and which selects a sub-optimal path. You will also see how other solutions like configuring the MED won&#8217;t solve our problem. This example will help to understand why we need AIGP. In the &#8220;after&#8221; scenario, we&#8217;ll configure AIGP, and you&#8217;ll see how AIGP solves our sub-optimal routing problem.</p>
<p>Let&#8217;s get started!</p>
<h2><span class="ez-toc-section" id="Configuration"></span>Configuration<span class="ez-toc-section-end"></span></h2>
<p>This is the topology we&#8217;ll use:</p>
<p><img loading="lazy" decoding="async" class="alignnone size-full wp-image-64466" src="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-lab-topology.png" alt="Bgp Aigp Lab Topology" width="1608" height="578" srcset="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-lab-topology.png 1608w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-lab-topology-300x108.png 300w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-lab-topology-1024x368.png 1024w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-lab-topology-768x276.png 768w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-lab-topology-1536x552.png 1536w" sizes="(max-width: 1608px) 100vw, 1608px" /></p>
<div class="responsive-tabs">
<p class="tabtitle">Configurations</p>
<div class="tabcontent">

<p>Want to take a look for yourself? Here you will find the startup configuration of each device.</p>

</div><p class="tabtitle">R1</p>
<div class="tabcontent">

<pre><code>hostname R1
!
ip cef
!
interface Loopback0
 ip address 1.1.1.1 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.12.1 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.13.1 255.255.255.0
 ip ospf cost 30
!
router ospf 1
 network 1.1.1.1 0.0.0.0 area 0
 network 192.168.12.0 0.0.0.255 area 0
 network 192.168.13.0 0.0.0.255 area 0
!
router bgp 123
 network 1.1.1.1 mask 255.255.255.255
 neighbor 2.2.2.2 remote-as 123
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 3.3.3.3 remote-as 123
 neighbor 3.3.3.3 update-source Loopback0
!
end</code></pre>

</div><p class="tabtitle">R2</p>
<div class="tabcontent">

<pre><code>hostname R2
!
ip cef
!
interface Loopback0
 ip address 2.2.2.2 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.12.2 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.24.2 255.255.255.0
!
router ospf 1
 network 2.2.2.2 0.0.0.0 area 0
 network 192.168.12.0 0.0.0.255 area 0
!
router bgp 123
 neighbor 1.1.1.1 remote-as 123
 neighbor 1.1.1.1 update-source Loopback0
 neighbor 1.1.1.1 next-hop-self
 neighbor 3.3.3.3 remote-as 123
 neighbor 3.3.3.3 update-source Loopback0
 neighbor 3.3.3.3 next-hop-self
 neighbor 192.168.24.4 remote-as 456
!
end</code></pre>

</div><p class="tabtitle">R3</p>
<div class="tabcontent">

<pre><code>hostname R3
!
ip cef
!
interface Loopback0
 ip address 3.3.3.3 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.13.3 255.255.255.0
 ip ospf cost 30
!
interface GigabitEthernet0/1
 ip address 192.168.35.3 255.255.255.0
!
router ospf 1
 network 3.3.3.3 0.0.0.0 area 0
 network 192.168.13.0 0.0.0.255 area 0
!
router bgp 123
 neighbor 1.1.1.1 remote-as 123
 neighbor 1.1.1.1 update-source Loopback0
 neighbor 1.1.1.1 next-hop-self
 neighbor 2.2.2.2 remote-as 123
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 2.2.2.2 next-hop-self
 neighbor 192.168.35.5 remote-as 456
!
end</code></pre>

</div><p class="tabtitle">R4</p>
<div class="tabcontent">

<pre><code>hostname R4
!
ip cef
!
interface Loopback0
 ip address 4.4.4.4 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.46.4 255.255.255.0
 ip ospf cost 20
!
interface GigabitEthernet0/1
 ip address 192.168.24.4 255.255.255.0
!
router ospf 1
 network 4.4.4.4 0.0.0.0 area 0
 network 192.168.46.0 0.0.0.255 area 0
!
router bgp 456
 neighbor 5.5.5.5 remote-as 456
 neighbor 5.5.5.5 update-source Loopback0
 neighbor 5.5.5.5 next-hop-self
 neighbor 6.6.6.6 remote-as 456
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 6.6.6.6 next-hop-self
 neighbor 192.168.24.2 remote-as 123
!
end</code></pre>

</div><p class="tabtitle">R5</p>
<div class="tabcontent">

<pre><code>hostname R5
!
ip cef
!
interface Loopback0
 ip address 5.5.5.5 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.56.5 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.35.5 255.255.255.0
!
router ospf 1
 network 5.5.5.5 0.0.0.0 area 0
 network 192.168.56.0 0.0.0.255 area 0
!
router bgp 456
 neighbor 4.4.4.4 remote-as 456
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 4.4.4.4 next-hop-self
 neighbor 6.6.6.6 remote-as 456
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 6.6.6.6 next-hop-self
 neighbor 192.168.35.3 remote-as 123
!
end</code></pre>

</div><p class="tabtitle">R6</p>
<div class="tabcontent">

<pre><code>hostname R6

ip cef
!
interface Loopback0
 ip address 6.6.6.6 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.46.6 255.255.255.0
 ip ospf cost 20
!
interface GigabitEthernet0/1
 ip address 192.168.56.6 255.255.255.0
 ip ospf cost 10
!
router ospf 1
 network 6.6.6.6 0.0.0.0 area 0
 network 192.168.46.0 0.0.0.255 area 0
 network 192.168.56.0 0.0.0.255 area 0
!
router bgp 456
 network 6.6.6.6 mask 255.255.255.255
 neighbor 4.4.4.4 remote-as 456
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 5.5.5.5 remote-as 456
 neighbor 5.5.5.5 update-source Loopback0
!
end</code></pre>
</div></div>
<p>We have two ASes. Within each AS, we run OSPF. I changed the cost metric on some of the interfaces. Let&#8217;s see how this network behaves when we send traffic between 1.1.1.1 and 6.6.6.6.</p>
<p>I configured these examples on IOSv Software (VIOS-ADVENTERPRISE-M), Version 15.9(3)M2.</p>
<h3><span class="ez-toc-section" id="Default_BGP"></span>Default BGP<span class="ez-toc-section-end"></span></h3>
<p>We&#8217;ll start with a &#8220;default&#8221; BGP scenario where we don&#8217;t have any route-maps to steer traffic in another direction.</p>
<h4><span class="ez-toc-section" id="From_AS_123_to_AS_456"></span>From AS 123 to AS 456<span class="ez-toc-section-end"></span></h4>
<p>Let&#8217;s see how R1 wants to reach 6.6.6.6:</p>
<pre><code>R1#<strong>show ip bgp 6.6.6.6</strong>
BGP routing table entry for 6.6.6.6/32, version 3
Paths: (2 available, best #2, table default)
Flag: 0x100
  Not advertised to any peer
  Refresh Epoch 1
  456
    3.3.3.3 (metric 40) from 3.3.3.3 (3.3.3.3)
      Origin IGP, metric 0, localpref 100, valid, internal
      rx pathid: 0, tx pathid: 0
  Refresh Epoch 1
  456
    <span style="color: #ff0000;">2.2.2.2 (metric 20)</span> from 2.2.2.2 (2.2.2.2)
      Origin IGP, metric 0, localpref 100, <span style="color: #ff0000;">valid, internal, best</span>
      rx pathid: 0, tx pathid: 0x0</code></pre>
<p>R1 uses R2 as the next hop because it has the lowest IGP metric to the BGP next hop. Traffic enters AS 456 through R4. Let&#8217;s check the IGP metric to 6.6.6.6 on R4 and R5:</p>
<pre><code>R4#<strong>show ip route 6.6.6.6 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 30</span>, type intra area
      Route metric is 30, traffic share count is 1</code></pre>
<pre><code>R5#<strong>show ip route 6.6.6.6 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 20</span>, type intra area
      Route metric is 20, traffic share count is 1</code></pre>
<p>Looking from AS 456&#8217;s perspective, R5 has the lowest IGP metric to get to 6.6.6.6. However, when we look at the total metric picture, using R4 is the best option:</p>
<ul>
<li>The path through R2 = 10 + 20 + 10 = 40</li>
<li>The path through R3 = 30 + 10 + 10 = 50</li>
</ul>
<p>So, traffic from R1 to R6 takes the best path, excellent.</p>
<h4><span class="ez-toc-section" id="From_AS_456_to_AS_123"></span>From AS 456 to AS 123<span class="ez-toc-section-end"></span></h4>
<p>What about the other way around? From R6 to R1. Let&#8217;s check the BGP table on R6:</p>
<pre><code>R6#<strong>show ip bgp 1.1.1.1</strong>
BGP routing table entry for 1.1.1.1/32, version 4
Paths: (2 available, best #1, table default)
Flag: 0x100
  Not advertised to any peer
  Refresh Epoch 1
  123
    <span style="color: #ff0000;">5.5.5.5 (metric 20)</span> from 5.5.5.5 (5.5.5.5)
      Origin IGP, metric 0, localpref 100, valid, internal, best
      rx pathid: 0, tx pathid: 0x0
  Refresh Epoch 1
  123
    4.4.4.4 (metric 30) from 4.4.4.4 (4.4.4.4)
      Origin IGP, metric 0, localpref 100, valid, internal
      rx pathid: 0, tx pathid: 0</code></pre>
<p>R6 picks R5 because it has the lowest IGP metric to the next hop. Is that a good thing? Well, we know it&#8217;s not because we just figured out that the best path is through R4 and R2.</p>
<p>Let&#8217;s check it from AS 123&#8217;s perspective:</p>
<pre><code>R2#<strong>show ip route 1.1.1.1 | include metric</strong>
  Known via "ospf 1", distance 110, metric 20, type intra area
      <span style="color: #ff0000;">Route metric is 20</span>, traffic share count is 1</code></pre>
<pre><code>R3#<strong>show ip route 1.1.1.1 | include metric</strong>
  Known via "ospf 1", distance 110, metric 40, type intra area
      <span style="color: #ff0000;">Route metric is 40</span>, traffic share count is 1</code></pre>
<p>When we enter AS 123 through R3, we have to use the &#8220;slow&#8221; link with a higher metric.  The total metric of our paths looks like this:</p>
<ul>
<li>The path through R4 = 20 + 10 + 10 = 40</li>
<li>The path through R5 = 10 + 30 + 10 = 50</li>
</ul>
<p>The path through R4 would be the better option, but AS 456 can&#8217;t know this because it doesn&#8217;t know what AS 123 looks like.</p>
<h3><span class="ez-toc-section" id="BGP_MED"></span>BGP MED<span class="ez-toc-section-end"></span></h3>
<p>You might think, why don&#8217;t we use <a href="https://networklessons.com/bgp/how-to-configure-bgp-med-attribute">BGP MED</a> or perhaps <a href="https://networklessons.com/bgp/how-to-configure-bgp-as-path-prepending">AS path prepending</a>? That allows us to tell the AS on the other side how we like to receive traffic?</p>
<p>Let me show you what happens when we use MED. This helps to understand why we need AIGP.</p>
<h4><span class="ez-toc-section" id="MED_Configuration"></span>MED Configuration<span class="ez-toc-section-end"></span></h4>
<p>We&#8217;ll configure route-maps so that R2, R3, R4, and R5 set the MED based on their IGP metric to reach the loopback interface in their AS.</p>
<p><img loading="lazy" decoding="async" class="alignnone size-full wp-image-64469" src="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-med-example.png" alt="Bgp Aigp Med Example" width="1608" height="578" srcset="https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-med-example.png 1608w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-med-example-300x108.png 300w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-med-example-1024x368.png 1024w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-med-example-768x276.png 768w, https://cdn.networklessons.com/wp-content/uploads/2020/11/bgp-aigp-med-example-1536x552.png 1536w" sizes="(max-width: 1608px) 100vw, 1608px" /></p>
<h5><span class="ez-toc-section" id="AS_123"></span>AS 123<span class="ez-toc-section-end"></span></h5>
<p>Let&#8217;s start with R2:</p>
<pre><code>R2(config)#<strong>ip access-list standard R1_L0</strong>
R2(config-std-nacl)#<strong>permit host 1.1.1.1</strong>

R2(config)#<strong>route-map R1_L0_METRIC</strong>
R2(config-route-map)#<strong>match ip address R1_L0</strong>
R2(config-route-map)#<strong>set metric 20</strong>

R2(config)#<strong>router bgp 123</strong>
R2(config-router)#<strong>neighbor 192.168.24.4 route-map R1_L0_METRIC out</strong></code></pre>
<p>Here is R3:</p>
<pre><code>R3(config)#<strong>ip access-list standard R1_L0</strong>
R3(config-std-nacl)#<strong>permit host 1.1.1.1</strong>

R3(config)#<strong>route-map R1_L0_METRIC</strong>
R3(config-route-map)#<strong>match ip address R1_L0</strong>
R3(config-route-map)#<strong>set metric 40</strong>

R3(config-route-map)#<strong>router bgp 123</strong>
R3(config-router)#<strong>neighbor 192.168.35.5 route-map R1_L0_METRIC out</strong></code></pre>
<p>That&#8217;s all we need to configure in AS 123.</p>
<h5><span class="ez-toc-section" id="AS_456"></span>AS 456<span class="ez-toc-section-end"></span></h5>
<p>Let&#8217;s configure R4:</p>
<pre><code>R4(config)#<strong>ip access-list standard R6_L0</strong>
R4(config-std-nacl)#<strong>permit host 6.6.6.6</strong>

R4(config)#<strong>route-map R6_L0_METRIC</strong>
R4(config-route-map)#<strong>match ip address R6_L0</strong>
R4(config-route-map)#<strong>set metric 30</strong>

R4(config)#<strong>router bgp 456</strong>
R4(config-router)#<strong>neighbor 192.168.24.2 route-map R6_L0_METRIC out</strong></code></pre>
<p>and R5:</p>
<pre><code>R5(config)#<strong>ip access-list standard R6_L0</strong>
R5(config-std-nacl)#<strong>permit host 6.6.6.6</strong>

R5(config)#<strong>route-map R6_L0_METRIC</strong>
R5(config-route-map)#<strong>match ip address R6_L0</strong>
R5(config-route-map)#<strong>set metric 20</strong>

R5(config)#<strong>router bgp 456</strong>
R5(config-router)#<strong>neighbor 192.168.35.3 route-map R6_L0_METRIC out</strong></code></pre>
<p>That&#8217;s all we need to configure for MED.</p>
<h4><span class="ez-toc-section" id="From_AS_123_to_AS_456-2"></span>From AS 123 to AS 456<span class="ez-toc-section-end"></span></h4>
<p>Once again, let&#8217;s find out how traffic from R1 reaches R6. We&#8217;ll check R1:</p>
<pre><code>R1#<strong>show ip bgp 6.6.6.6</strong>
BGP routing table entry for 6.6.6.6/32, version 3
Paths: (1 available, best #1, table default)
Flag: 0x100
  Not advertised to any peer
  Refresh Epoch 1
  456
    <span style="color: #ff0000;">3.3.3.3</span> (metric 40) from 3.3.3.3 (3.3.3.3)
      Origin IGP, <span style="color: #ff0000;">metric 20</span>, localpref 100, valid, <span style="color: #ff0000;">internal, best</span>
      rx pathid: 0, tx pathid: 0x0</code></pre>
<p>R1 has only path now. That&#8217;s because R2 prefers the path through R3 over its own eBGP path:</p>
<pre><code>R2#<strong>show ip bgp 6.6.6.6</strong>
BGP routing table entry for 6.6.6.6/32, version 3
Paths: (2 available, best #2, table default)
  Not advertised to any peer
  Refresh Epoch 1
  456
    192.168.24.4 from 192.168.24.4 (4.4.4.4)
      Origin IGP, metric 30, localpref 100, valid, external
      rx pathid: 0, tx pathid: 0
  Refresh Epoch 1
  456
    <span style="color: #ff0000;">3.3.3.3</span> (metric 50) from 3.3.3.3 (3.3.3.3)
      Origin IGP, <span style="color: #ff0000;">metric 20</span>, localpref 100, valid, <span style="color: #ff0000;">internal, best</span>
      rx pathid: 0, tx pathid: 0x0</code></pre>
<pre><code>R3#<strong>show ip bgp 6.6.6.6</strong>
BGP routing table entry for 6.6.6.6/32, version 3
Paths: (1 available, best #1, table default)
  Advertised to update-groups:
     14        
  Refresh Epoch 1
  456
    192.168.35.5 from 192.168.35.5 (5.5.5.5)
      Origin IGP, metric 20, localpref 100, valid, <span style="color: #ff0000;">external, best</span>
      rx pathid: 0, tx pathid: 0x0</code></pre>
<p>BGP prefers the path with the lowest MED.</p>
<p>That&#8217;s not good. AS 123 now uses R3 to reach AS 456 and we know this is not the path with the lowest total metric.</p>
<h4><span class="ez-toc-section" id="From_AS_456_to_AS_123-2"></span>From AS 456 to AS 123<span class="ez-toc-section-end"></span></h4>
<p>Let&#8217;s check the other way around. What about traffic from R6 to R1?</p>
<p>Here&#8217;s R6:</p>
<pre><code>R6#<strong>show ip bgp 1.1.1.1</strong>
BGP routing table entry for 1.1.1.1/32, version 2
Paths: (1 available, best #1, table default)
  Not advertised to any peer
  Refresh Epoch 1
  123
    <span style="color: #ff0000;">4.4.4.4</span> (metric 30) from 4.4.4.4 (4.4.4.4)
      Origin IGP, <span style="color: #ff0000;">metric 20</span>, localpref 100, valid, <span style="color: #ff0000;">internal, best</span>
      rx pathid: 0, tx pathid: 0x0</code></pre>
<p>R6 only sees R4 as a possible path. This is because R5 prefers to use R4 over its eBGP path:</p>
<pre><code>R5#<strong>show ip bgp 1.1.1.1</strong>
BGP routing table entry for 1.1.1.1/32, version 2
Paths: (2 available, best #1, table default)
  Not advertised to any peer
  Refresh Epoch 1
  123
    <span style="color: #ff0000;">4.4.4.4</span> (metric 40) from 4.4.4.4 (4.4.4.4)
      Origin IGP, <span style="color: #ff0000;">metric 20</span>, localpref 100, valid, <span style="color: #ff0000;">internal, best</span>
      rx pathid: 0, tx pathid: 0x0
  Refresh Epoch 1
  123
    192.168.35.3 from 192.168.35.3 (3.3.3.3)
      Origin IGP, metric 40, localpref 100, valid, external
      rx pathid: 0, tx pathid: 0</code></pre>
<pre><code>R4#<strong>show ip bgp 1.1.1.1</strong>
BGP routing table entry for 1.1.1.1/32, version 2
Paths: (1 available, best #1, table default)
  Advertised to update-groups:
     11        
  Refresh Epoch 1
  123
    192.168.24.2 from 192.168.24.2 (2.2.2.2)
      Origin IGP, metric 20, localpref 100, valid, <span style="color: #ff0000;">external, best</span>
      rx pathid: 0, tx pathid: 0x0</code></pre>
<p>AS 456 is now using the most optimal path. However, AS 123 isn&#8217;t.<br />
<div class="responsive-tabs">
<p class="tabtitle">Configurations</p>
<div class="tabcontent">
</p>
<p>Want to take a look for yourself? Here you will find the final configuration of each device.</p>

</div><p class="tabtitle">R1</p>
<div class="tabcontent">

<pre><code>hostname R1
!
ip cef
!
interface Loopback0
 ip address 1.1.1.1 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.12.1 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.13.1 255.255.255.0
 ip ospf cost 30
!
router ospf 1
 network 1.1.1.1 0.0.0.0 area 0
 network 192.168.12.0 0.0.0.255 area 0
 network 192.168.13.0 0.0.0.255 area 0
!
router bgp 123
 network 1.1.1.1 mask 255.255.255.255
 neighbor 2.2.2.2 remote-as 123
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 3.3.3.3 remote-as 123
 neighbor 3.3.3.3 update-source Loopback0
!
end</code></pre>

</div><p class="tabtitle">R2</p>
<div class="tabcontent">

<pre><code>hostname R2
!
ip cef
!
interface Loopback0
 ip address 2.2.2.2 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.12.2 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.24.2 255.255.255.0
!
router ospf 1
 network 2.2.2.2 0.0.0.0 area 0
 network 192.168.12.0 0.0.0.255 area 0
!
router bgp 123
 neighbor 1.1.1.1 remote-as 123
 neighbor 1.1.1.1 update-source Loopback0
 neighbor 1.1.1.1 next-hop-self
 neighbor 3.3.3.3 remote-as 123
 neighbor 3.3.3.3 update-source Loopback0
 neighbor 3.3.3.3 next-hop-self
 neighbor 192.168.24.4 remote-as 456
 neighbor 192.168.24.4 route-map R1_L0_METRIC out
!
ip access-list standard R1_L0
 permit 1.1.1.1
!
route-map R1_L0_METRIC permit 10
 match ip address R1_L0
 set metric 20
!
end</code></pre>

</div><p class="tabtitle">R3</p>
<div class="tabcontent">

<pre><code>hostname R3
!
ip cef
!
interface Loopback0
 ip address 3.3.3.3 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.13.3 255.255.255.0
 ip ospf cost 30
!
interface GigabitEthernet0/1
 ip address 192.168.35.3 255.255.255.0
!
router ospf 1
 network 3.3.3.3 0.0.0.0 area 0
 network 192.168.13.0 0.0.0.255 area 0
!
router bgp 123
 neighbor 1.1.1.1 remote-as 123
 neighbor 1.1.1.1 update-source Loopback0
 neighbor 1.1.1.1 next-hop-self
 neighbor 2.2.2.2 remote-as 123
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 2.2.2.2 next-hop-self
 neighbor 192.168.35.5 remote-as 456
 neighbor 192.168.35.5 route-map R1_L0_METRIC out
!
ip access-list standard R1_L0
 permit 1.1.1.1
!
route-map R1_L0_METRIC permit 10
 match ip address R1_L0
 set metric 40
!
end</code></pre>

</div><p class="tabtitle">R4</p>
<div class="tabcontent">

<pre><code>hostname R4
!
ip cef
!
interface Loopback0
 ip address 4.4.4.4 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.46.4 255.255.255.0
 ip ospf cost 20
!
interface GigabitEthernet0/1
 ip address 192.168.24.4 255.255.255.0
!
router ospf 1
 network 4.4.4.4 0.0.0.0 area 0
 network 192.168.46.0 0.0.0.255 area 0
!
router bgp 456
 neighbor 5.5.5.5 remote-as 456
 neighbor 5.5.5.5 update-source Loopback0
 neighbor 5.5.5.5 next-hop-self
 neighbor 6.6.6.6 remote-as 456
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 6.6.6.6 next-hop-self
 neighbor 192.168.24.2 remote-as 123
 neighbor 192.168.24.2 route-map R6_L0_METRIC out
!
ip access-list standard R6_L0
 permit 6.6.6.6
!
route-map R6_L0_METRIC permit 10
 match ip address R6_L0
 set metric 30
!
end</code></pre>

</div><p class="tabtitle">R5</p>
<div class="tabcontent">

<pre><code>hostname R5
!
ip cef
!
interface Loopback0
 ip address 5.5.5.5 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.56.5 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.35.5 255.255.255.0
!
router ospf 1
 network 5.5.5.5 0.0.0.0 area 0
 network 192.168.56.0 0.0.0.255 area 0
!
router bgp 456
 neighbor 4.4.4.4 remote-as 456
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 4.4.4.4 next-hop-self
 neighbor 6.6.6.6 remote-as 456
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 6.6.6.6 next-hop-self
 neighbor 192.168.35.3 remote-as 123
 neighbor 192.168.35.3 route-map R6_L0_METRIC out
!
ip access-list standard R6_L0
 permit 6.6.6.6
!
route-map R6_L0_METRIC permit 10
 match ip address R6_L0
 set metric 20
!
end</code></pre>

</div><p class="tabtitle">R6</p>
<div class="tabcontent">

<pre><code>hostname R6
!
ip cef
!
interface Loopback0
 ip address 6.6.6.6 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.46.6 255.255.255.0
 ip ospf cost 20
!
interface GigabitEthernet0/1
 ip address 192.168.56.6 255.255.255.0
 ip ospf cost 10
!
router ospf 1
 network 6.6.6.6 0.0.0.0 area 0
 network 192.168.46.0 0.0.0.255 area 0
 network 192.168.56.0 0.0.0.255 area 0
!
router bgp 456
 network 6.6.6.6 mask 255.255.255.255
 neighbor 4.4.4.4 remote-as 456
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 5.5.5.5 remote-as 456
 neighbor 5.5.5.5 update-source Loopback0
!
 exec-timeout 0 0
 login
 transport input none
!
end</code></pre>
</div></div>
<h3><span class="ez-toc-section" id="AIGP"></span>AIGP<span class="ez-toc-section-end"></span></h3>
<p>It&#8217;s time for AIGP and to finally configure what you came for. Let&#8217;s make sure both AS 123 and AS 456 will use the most optimal path. </p>
<p>We&#8217;ll start again with the original BGP configuration we had at the beginning, without the MED configuration. We are going to enable AIGP on all routers for all neighbors:</p>
<pre><code>R1(config)#<strong>router bgp 123</strong>
R1(config-router)#<strong>neighbor 2.2.2.2 aigp</strong>
R1(config-router)#<strong>neighbor 3.3.3.3 aigp</strong></code></pre>
<pre><code>R2(config)#<strong>router bgp 123</strong>
R2(config-router)#<strong>neighbor 1.1.1.1 aigp</strong>
R2(config-router)#<strong>neighbor 3.3.3.3 aigp</strong>
R2(config-router)#<strong>neighbor 192.168.24.4 aigp</strong></code></pre>
<pre><code>R3(config)#<strong>router bgp 123</strong>
R3(config-router)#<strong>neighbor 1.1.1.1 aigp</strong>
R3(config-router)#<strong>neighbor 2.2.2.2 aigp</strong>
R3(config-router)#<strong>neighbor 192.168.35.5 aigp</strong></code></pre>
<pre><code>R4(config)#<strong>router bgp 456</strong>
R4(config-router)#<strong>neighbor 5.5.5.5 aigp</strong>
R4(config-router)#<strong>neighbor 6.6.6.6 aigp</strong>
R4(config-router)#<strong>neighbor 192.168.24.2 aigp</strong></code></pre>
<pre><code>R5(config)#<strong>router bgp 456</strong>
R5(config-router)#<strong>neighbor 4.4.4.4 aigp</strong>
R5(config-router)#<strong>neighbor 6.6.6.6 aigp</strong>
R5(config-router)#<strong>neighbor 192.168.35.3 aigp</strong></code></pre>
<pre><code>R6(config)#<strong>router bgp 456</strong>
R6(config-router)#<strong>neighbor 4.4.4.4 aigp</strong>
R6(config-router)#<strong>neighbor 5.5.5.5 aigp</strong></code></pre>
<p>Enabling AIGP is not enough. We need to configure for which routes we want to set the AIGP attribute. I&#8217;ll configure R1 and R6 so the AIGP metric matches the IGP metric of their loopback interfaces.</p>
<p>Remember the R1_L0 and R6_L0 access lists we created for the MED configuration? I will re-use those for this example.  R1 and R6 will advertise the AIGP metric to their iBGP neighbors.</p>
<p>Here&#8217;s R1:</p>
<pre><code>R1(config)#<strong>route-map AIGP permit 10</strong>
R1(config-route-map)#<strong>match ip address R1_L0</strong>
R1(config-route-map)#<strong>set aigp-metric igp-metric</strong>

R1(config)#<strong>router bgp 123</strong>
R1(config-router)#<strong>neighbor 2.2.2.2 route-map AIGP out</strong>
R1(config-router)#<strong>neighbor 3.3.3.3 route-map AIGP out</strong></code></pre>
<p>And we configure the same thing on R6:</p>
<pre><code>R6(config)#<strong>route-map AIGP permit 10</strong>
R6(config-route-map)#<strong>match ip address R6_L0</strong>
R6(config-route-map)#<strong>set aigp-metric igp-metric</strong>

R6(config)#<strong>router bgp 456</strong>
R6(config-router)#<strong>neighbor 4.4.4.4 route-map AIGP out</strong>
R6(config-router)#<strong>neighbor 5.5.5.5 route-map AIGP out</strong></code></pre>
<p>Let&#8217;s verify our work. First, let&#8217;s make sure AIGP is enabled:</p>
<pre><code>R1#<strong>show bgp ipv4 unicast neighbors 2.2.2.2 | include AIGP</strong>
<span style="color: #ff0000;">AIGP is enabled</span></code></pre>
<p>The output above tells us enough. You should check this on all routers.</p>
<h4><span class="ez-toc-section" id="AS_123_to_AS_456"></span>AS 123 to AS 456<span class="ez-toc-section-end"></span></h4>
<p>Now the moment we have been waiting for. What do our traffic patterns look like? Let&#8217;s start with R1:</p>
<pre><code>R1#<strong>show ip bgp 6.6.6.6</strong>
BGP routing table entry for 6.6.6.6/32, version 5
Paths: (2 available, best #1, table default)
  Not advertised to any peer
  Refresh Epoch 2
  456
    <span style="color: #ff0000;">2.2.2.2</span> (metric 20) from 2.2.2.2 (2.2.2.2)
      Origin IGP, <span style="color: #ff0000;">aigp-metric 30</span>, metric 0, localpref 100, valid, <span style="color: #ff0000;">internal, best</span>
      rx pathid: 0, tx pathid: 0x0
  Refresh Epoch 2
  456
    3.3.3.3 (metric 40) from 3.3.3.3 (3.3.3.3)
      Origin IGP, <span style="color: #ff0000;">aigp-metric 20</span>, metric 0, localpref 100, valid, internal
      rx pathid: 0, tx pathid: 0</code></pre>
<p>See how R1 uses 2.2.2.2 and has the AIGP metric? The metrics you see here are those that R2 receives from R4 and R3 from R5. You can see them here:</p>
<pre><code>R4#<strong>show ip route 6.6.6.6 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 30</span>, type intra area
      Route metric is 30, traffic share count is 1</code></pre>
<pre><code>R5#<strong>show ip route 6.6.6.6 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 20</span>, type intra area
      Route metric is 20, traffic share count is 1</code></pre>
<p>R1 looks at these AIGP metrics and checks the IGP metric to reach R2 or R3:</p>
<pre><code>R1#<strong>show ip route 2.2.2.2 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 20</span>, type intra area
      Route metric is 20, traffic share count is 1</code></pre>
<pre><code>R1#<strong>show ip route 3.3.3.3 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 40</span>, type intra area
      Route metric is 40, traffic share count is 1</code></pre>
<p>The shortest path to 6.6.6.6 is through R2 because the AIGP metric is 30 and the IGP metric is 20. The total metric is 50:</p>
<pre><code>R1#<strong>show ip route 6.6.6.6 | include metric</strong>
  Known via "bgp 123", distance 200, <span style="color: #ff0000;">metric 50</span>
      Route metric is 50, traffic share count is 1</code></pre>
<p>This is looking good. However, R1 already picked the best path in our &#8220;default&#8221; BGP scenario.</p>
<h4><span class="ez-toc-section" id="AS_456_to_AS_123"></span>AS 456 to AS 123<span class="ez-toc-section-end"></span></h4>
<p>What about R6? Traffic from AS 456 to AS 123 picked the wrong path in our &#8220;default&#8221; BGP scenario. Let&#8217;s take a look:</p>
<pre><code>R6#<strong>show ip bgp 1.1.1.1</strong>
BGP routing table entry for 1.1.1.1/32, version 5
Paths: (2 available, best #1, table default)
  Not advertised to any peer
  Refresh Epoch 2
  123
    <span style="color: #ff0000;">4.4.4.4</span> (metric 30) from 4.4.4.4 (4.4.4.4)
      Origin IGP, <span style="color: #ff0000;">aigp-metric 20</span>, metric 0, localpref 100, valid, <span style="color: #ff0000;">internal, best</span>
      rx pathid: 0, tx pathid: 0x0
  Refresh Epoch 2
  123
    5.5.5.5 (metric 20) from 5.5.5.5 (5.5.5.5)
      Origin IGP, <span style="color: #ff0000;">aigp-metric 40</span>, metric 0, localpref 100, valid, internal
      rx pathid: 0, tx pathid: 0</code></pre>
<p>R6 now uses R4 to enter AS 123. That&#8217;s good! The AIGP metrics above are the IGP metrics we receive from AS 123:</p>
<pre><code>R2#<strong>show ip route 1.1.1.1 | include Route metric</strong>
      <span style="color: #ff0000;">Route metric is 20</span>, traffic share count is 1</code></pre>
<pre><code>R3#<strong>show ip route 1.1.1.1 | include Route metric</strong>
      <span style="color: #ff0000;">Route metric is 40</span>, traffic share count is 1</code></pre>
<p>R6 also considers the IGP metric to reach these next hops (R4 and R5):</p>
<pre><code>R6#<strong>show ip route 4.4.4.4 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 30</span>, type intra area
      Route metric is 30, traffic share count is 1</code></pre>
<pre><code>R6#<strong>show ip route 5.5.5.5 | include metric</strong>
  Known via "ospf 1", distance 110, <span style="color: #ff0000;">metric 20</span>, type intra area
      Route metric is 20, traffic share count is 1</code></pre>
<p>The path through R4 is the shortest path: AIGP metric 20 + IGP metric 30:</p>
<pre><code>R6#<strong>show ip route 1.1.1.1 | include metric</strong>
  Known via "bgp 456", distance 200, <span style="color: #ff0000;">metric 50</span></code></pre>
<p>Mission accomplished! Thanks to AIGP, both ASes now select the best end-to-end path.<br />
<div class="responsive-tabs">
<p class="tabtitle">Configurations</p>
<div class="tabcontent">
</p>
<p>Want to take a look for yourself? Here you will find the final configuration of each device.</p>

</div><p class="tabtitle">R1</p>
<div class="tabcontent">

<pre><code>hostname R1
!
ip cef
!
interface Loopback0
 ip address 1.1.1.1 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.12.1 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.13.1 255.255.255.0
 ip ospf cost 30
!
router ospf 1
 network 1.1.1.1 0.0.0.0 area 0
 network 192.168.12.0 0.0.0.255 area 0
 network 192.168.13.0 0.0.0.255 area 0
!
router bgp 123
 network 1.1.1.1 mask 255.255.255.255
 neighbor 2.2.2.2 remote-as 123
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 2.2.2.2 aigp
 neighbor 2.2.2.2 route-map AIGP out
 neighbor 3.3.3.3 remote-as 123
 neighbor 3.3.3.3 update-source Loopback0
 neighbor 3.3.3.3 aigp
 neighbor 3.3.3.3 route-map AIGP out
!
ip access-list standard R1_L0
 permit 1.1.1.1
!
route-map AIGP permit 10
 match ip address R1_L0
 set aigp-metric igp-metric
!
end</code></pre>

</div><p class="tabtitle">R2</p>
<div class="tabcontent">

<pre><code>hostname R2
!
interface Loopback0
 ip address 2.2.2.2 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.12.2 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.24.2 255.255.255.0
!
router ospf 1
 network 2.2.2.2 0.0.0.0 area 0
 network 192.168.12.0 0.0.0.255 area 0
!
router bgp 123
 neighbor 1.1.1.1 remote-as 123
 neighbor 1.1.1.1 update-source Loopback0
 neighbor 1.1.1.1 aigp
 neighbor 1.1.1.1 next-hop-self
 neighbor 3.3.3.3 remote-as 123
 neighbor 3.3.3.3 update-source Loopback0
 neighbor 3.3.3.3 aigp
 neighbor 3.3.3.3 next-hop-self
 neighbor 192.168.24.4 remote-as 456
 neighbor 192.168.24.4 aigp
!
ip access-list standard R1_L0
 permit 1.1.1.1
!
route-map AIGP permit 10
 match ip address R1_L0
 set aigp-metric igp-metric
!
end    </code></pre>

</div><p class="tabtitle">R3</p>
<div class="tabcontent">

<pre><code>hostname R3
!
ip cef
!
interface Loopback0
 ip address 3.3.3.3 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.13.3 255.255.255.0
 ip ospf cost 30
!
interface GigabitEthernet0/1
 ip address 192.168.35.3 255.255.255.0
!
router ospf 1
 network 3.3.3.3 0.0.0.0 area 0
 network 192.168.13.0 0.0.0.255 area 0
!
router bgp 123
 neighbor 1.1.1.1 remote-as 123
 neighbor 1.1.1.1 update-source Loopback0
 neighbor 1.1.1.1 aigp
 neighbor 1.1.1.1 next-hop-self
 neighbor 2.2.2.2 remote-as 123
 neighbor 2.2.2.2 update-source Loopback0
 neighbor 2.2.2.2 aigp
 neighbor 2.2.2.2 next-hop-self
 neighbor 192.168.35.5 remote-as 456
 neighbor 192.168.35.5 aigp
!
ip access-list standard R1_L0
 permit 1.1.1.1
!
route-map AIGP permit 10
 match ip address R1_L0
 set aigp-metric igp-metric
!
end</code></pre>

</div><p class="tabtitle">R4</p>
<div class="tabcontent">

<pre><code>hostname R4
!
ip cef
!
interface Loopback0
 ip address 4.4.4.4 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.46.4 255.255.255.0
 ip ospf cost 20
!
interface GigabitEthernet0/1
 ip address 192.168.24.4 255.255.255.0
!
router ospf 1
 network 4.4.4.4 0.0.0.0 area 0
 network 192.168.46.0 0.0.0.255 area 0
!
router bgp 456
 neighbor 5.5.5.5 remote-as 456
 neighbor 5.5.5.5 update-source Loopback0
 neighbor 5.5.5.5 aigp
 neighbor 5.5.5.5 next-hop-self
 neighbor 6.6.6.6 remote-as 456
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 6.6.6.6 aigp
 neighbor 6.6.6.6 next-hop-self
 neighbor 192.168.24.2 remote-as 123
 neighbor 192.168.24.2 aigp
!
ip access-list standard R6_L0
 permit 6.6.6.6
!
route-map AIGP permit 10
 match ip address R6_L0
 set aigp-metric igp-metric
!
end</code></pre>

</div><p class="tabtitle">R5</p>
<div class="tabcontent">

<pre><code>hostname R5
!
ip cef
!
interface Loopback0
 ip address 5.5.5.5 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.56.5 255.255.255.0
 ip ospf cost 10
!
interface GigabitEthernet0/1
 ip address 192.168.35.5 255.255.255.0
!
router ospf 1
 network 5.5.5.5 0.0.0.0 area 0
 network 192.168.56.0 0.0.0.255 area 0
!
router bgp 456
 neighbor 4.4.4.4 remote-as 456
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 4.4.4.4 aigp
 neighbor 4.4.4.4 next-hop-self
 neighbor 6.6.6.6 remote-as 456
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 6.6.6.6 aigp
 neighbor 6.6.6.6 next-hop-self
 neighbor 192.168.35.3 remote-as 123
 neighbor 192.168.35.3 aigp
!
ip access-list standard R6_L0
 permit 6.6.6.6
!
route-map AIGP permit 10
 match ip address R6_L0
 set aigp-metric igp-metric
!
 login
!
end</code></pre>

</div><p class="tabtitle">R6</p>
<div class="tabcontent">

<pre><code>hostname R6
!
ip cef
!
interface Loopback0
 ip address 6.6.6.6 255.255.255.255
 ip ospf cost 10
!
interface GigabitEthernet0/0
 ip address 192.168.46.6 255.255.255.0
 ip ospf cost 20
!
interface GigabitEthernet0/1
 ip address 192.168.56.6 255.255.255.0
 ip ospf cost 10
!
router ospf 1
 network 6.6.6.6 0.0.0.0 area 0
 network 192.168.46.0 0.0.0.255 area 0
 network 192.168.56.0 0.0.0.255 area 0
!
router bgp 456
 network 6.6.6.6 mask 255.255.255.255
 neighbor 4.4.4.4 remote-as 456
 neighbor 4.4.4.4 update-source Loopback0
 neighbor 4.4.4.4 aigp
 neighbor 4.4.4.4 route-map AIGP out
 neighbor 5.5.5.5 remote-as 456
 neighbor 5.5.5.5 update-source Loopback0
 neighbor 5.5.5.5 aigp
 neighbor 5.5.5.5 route-map AIGP out
!
ip access-list standard R6_L0
 permit 6.6.6.6
!
route-map AIGP permit 10
 match ip address R6_L0
 set aigp-metric igp-metric
!
end</code></pre>
</div></div>
<h3><span class="ez-toc-section" id="BGP_Path_Selection_Algorithm_Changes"></span>BGP Path Selection Algorithm Changes<span class="ez-toc-section-end"></span></h3>
<p>Before we wrap up this lesson, there&#8217;s one more thing I&#8217;d like to demonstrate. At the beginning of this lesson, I explained that AIGP changes the BGP best-path algorithm. How about we test that?</p>
<p>The fourth step in the BGP path selection is that BGP prefers the path with the shortest AS path. When you enable AIGP, BGP prefers the lowest AIGP metric first.</p>
<p>I&#8217;ll configure R4 to prepend the AS path multiple times:</p>
<pre><code>R4(config)#<strong>route-map AS_PATH_PREPEND permit 10</strong>
R4(config-route-map)#<strong>set as-path prepend 456 456 456</strong>

R4(config)#<strong>router bgp 456</strong>
R4(config-router)#<strong>neighbor 192.168.24.2 route-map AS_PATH_PREPEND out</strong></code></pre>
<p>Now let&#8217;s check R1:</p>
<pre><code>R1#<strong>show ip bgp 6.6.6.6</strong>
BGP routing table entry for 6.6.6.6/32, version 7
Paths: (2 available, best #1, table default)
  Not advertised to any peer
  Refresh Epoch 2
  <span style="color: #ff0000;">456 456 456 456</span>
    2.2.2.2 (metric 20) from 2.2.2.2 (2.2.2.2)
      Origin IGP, <span style="color: #ff0000;">aigp-metric 30</span>, metric 0, localpref 100, valid, internal, <span style="color: #ff0000;">best</span>
      rx pathid: 0, tx pathid: 0x0
  Refresh Epoch 2
  <span style="color: #ff0000;">456</span>
    3.3.3.3 (metric 40) from 3.3.3.3 (3.3.3.3)
      Origin IGP, <span style="color: #ff0000;">aigp-metric 20</span>, metric 0, localpref 100, valid, internal
      rx pathid: 0, tx pathid: 0</code></pre>
<p>Above, you can see that R1 still prefers the path through R2 even though the AS path is longer than through R3. This proves that BGP checks the AIGP metric before looking at the AS path length.</p>
<h2><span class="ez-toc-section" id="Conclusion"></span>Conclusion<span class="ez-toc-section-end"></span></h2>
<p>You have now learned:</p>
<ul>
<li>Why networks under a single administrative domain sometimes use multiple Ases, each with its own IGP.</li>
<li>That using multiple ASes and IGPs introduces a problem:
<ul>
<li>Each AS doesn&#8217;t see the full picture of the network.</li>
<li>The best path selection algorithm of BGP doesn&#8217;t use a metric to find the shortest path like IGPs do.</li>
</ul>
</li>
<li>How you can&#8217;t solve this problem with BGP attributes like MED or AS path prepending.</li>
<li>How AIGP solves the problem by including the accumulated IGP metric in a new BGP attribute.</li>
<li>How AIGP allows BGP to select the best path based on the end-to-end metric in all ASes.</li>
<li>How AIGP changes the BGP best-path selection algorithm. AIGP becomes the tie-breaker right after step 3.</li>
</ul>
<p>If you want to learn more details about AIGP, take a look at <a href="https://tools.ietf.org/html/rfc7311" target="_blank" rel="noopener noreferrer nofollow">RFC 7311</a>. I hope you enjoyed this lesson. If you have any questions feel free to leave a comment!</p>
            </div>
                	</div>
</article>
		</main>
	</div>


<div class="widget-area col-md-4">
            <div class="site-actions-toolbar d-none d-md-flex">
            <div class="site-action js--dark-mode">
                <i class="far fa-adjust"></i>
            </div>
        </div>
        <aside id="secondary">
        <section id="block-2" class="widget widget_block"><p><div class="urlspecificmenu-toggle">Lessons</div><div class="fullpage-overlay urlspecificmenu-overlay"></div><div class="urlspecificmenu"><div class="urlspecificmenu-close"><i class="far fa-times"></i></div>
				<h2>Course Contents</h2><p>BGP</p><nav id="bellows-main-650" class="bellows bellows-nojs bellows-main bellows-source-menu bellows-align-full bellows-skin-none bellows-type-accordion bellows-expand-current"><ul id="menu-bgp" class="bellows-nav" data-bellows-config="main"><li id="menu-item-18696" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-has-children bellows-menu-item-18696 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 1: Introduction to BGP</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-18697" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18697 bellows-item-level-1"><a  href="https://networklessons.com/bgp/introduction-to-bgp" class="bellows-target"><span class="bellows-target-title bellows-target-text">Introduction to BGP</span></a></li>
	<li id="menu-item-41087" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-41087 bellows-item-level-1"><a  href="https://networklessons.com/bgp/singledual-homed-and-multi-homed-designs" class="bellows-target"><span class="bellows-target-title bellows-target-text">Single/Dual (multi) homed connections</span></a></li>
	<li id="menu-item-18698" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18698 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-configure-ebgp-external-bgp" class="bellows-target"><span class="bellows-target-title bellows-target-text">eBGP (external BGP)</span></a></li>
	<li id="menu-item-18699" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18699 bellows-item-level-1"><a  href="https://networklessons.com/bgp/ebgp-multihop" class="bellows-target"><span class="bellows-target-title bellows-target-text">eBGP Multi-Hop</span></a></li>
	<li id="menu-item-18700" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18700 bellows-item-level-1"><a  href="https://networklessons.com/bgp/internal-bgp-border-gateway-protocol-explained" class="bellows-target"><span class="bellows-target-title bellows-target-text">iBGP (internal BGP)</span></a></li>
	<li id="menu-item-18701" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18701 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-read-the-bgp-table" class="bellows-target"><span class="bellows-target-title bellows-target-text">How to read the BGP Table</span></a></li>
	<li id="menu-item-18702" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18702 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-advertise-networks-in-bgp" class="bellows-target"><span class="bellows-target-title bellows-target-text">How to advertise networks in BGP</span></a></li>
	<li id="menu-item-18703" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18703 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-next-hop-self" class="bellows-target"><span class="bellows-target-title bellows-target-text">iBGP Next Hop Self</span></a></li>
	<li id="menu-item-18704" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18704 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-auto-summary" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Auto-summary</span></a></li>
</ul>
</li>
<li id="menu-item-18705" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-has-children bellows-menu-item-18705 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 2: BGP Neighbor Adjacency</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-18706" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18706 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-neighbor-adjacency-states" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Neighbor Adjacency States</span></a></li>
	<li id="menu-item-18707" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18707 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-messages" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Messages</span></a></li>
	<li id="menu-item-19043" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-19043 bellows-item-level-1"><a  href="https://networklessons.com/bgp/troubleshooting-bgp-neighbor-adjacency" class="bellows-target"><span class="bellows-target-title bellows-target-text">Troubleshooting BGP Neighbor Adjacency</span></a></li>
	<li id="menu-item-19044" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-19044 bellows-item-level-1"><a  href="https://networklessons.com/bgp/troubleshooting-bgp-route-advertisement" class="bellows-target"><span class="bellows-target-title bellows-target-text">Troubleshooting BGP Route Advertisement</span></a></li>
</ul>
</li>
<li id="menu-item-18708" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-current-menu-ancestor bellows-current-menu-parent bellows-menu-item-has-children bellows-menu-item-18708 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 3: BGP Attributes</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-55984" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55984 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-attributes-and-path-selection" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Attributes and Path Selection</span></a></li>
	<li id="menu-item-18709" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18709 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-configure-bgp-weight-attribute" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Weight Attribute</span></a></li>
	<li id="menu-item-18710" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18710 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-configure-bgp-local-preference-attribute" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Local Preference</span></a></li>
	<li id="menu-item-70348" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-70348 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-attribute-locally-originated" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Attribute Locally Originated</span></a></li>
	<li id="menu-item-18711" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18711 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-configure-bgp-as-path-prepending" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP AS Path Prepending</span></a></li>
	<li id="menu-item-18712" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18712 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-origin-code-attribute-explained" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Origin Code</span></a></li>
	<li id="menu-item-18713" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18713 bellows-item-level-1"><a  href="https://networklessons.com/bgp/how-to-configure-bgp-med-attribute" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP MED (metric) Attribute</span></a></li>
	<li id="menu-item-70378" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-70378 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-prefer-ebgp-over-ibgp" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Prefer eBGP over iBGP</span></a></li>
	<li id="menu-item-64483" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-current-menu-item bellows-menu-item-64483 bellows-item-level-1 bellows-current-menu-item"><a  href="https://networklessons.com/bgp/accumulated-igp-metric-attribute-aigp" class="bellows-target"><span class="bellows-target-title bellows-target-text">Accumulated IGP Metric Attribute (AIGP)</span></a></li>
</ul>
</li>
<li id="menu-item-18714" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-has-children bellows-menu-item-18714 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 4: BGP Communities</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-18715" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18715 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-communities-explained" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Communities</span></a></li>
	<li id="menu-item-18716" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18716 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-community-no-advertise" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Community No Advertise</span></a></li>
	<li id="menu-item-18717" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18717 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-community-no-export" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Community No Export</span></a></li>
	<li id="menu-item-18718" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18718 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-community-local-as" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Community Local AS</span></a></li>
</ul>
</li>
<li id="menu-item-18719" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-has-children bellows-menu-item-18719 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 5: BGP Filtering</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-18720" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18720 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-regular-expressions-examples" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Regular Expressions</span></a></li>
	<li id="menu-item-18721" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18721 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-prevent-transit-as" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Transit AS</span></a></li>
	<li id="menu-item-18722" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18722 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-ipv6-route-filtering-on-cisco-ios" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP IPv6 route filtering</span></a></li>
	<li id="menu-item-18723" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18723 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-as-path-filter-example" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP AS Path Filter</span></a></li>
	<li id="menu-item-18830" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18830 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-extended-access-list-filtering" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Extended Access-List Filtering</span></a></li>
</ul>
</li>
<li id="menu-item-18724" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-has-children bellows-menu-item-18724 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 6: Advanced BGP Features</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-66434" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-66434 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-route-dampening" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Route Dampening</span></a></li>
	<li id="menu-item-18725" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18725 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-peer-groups-on-cisco-ios" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Peer Groups</span></a></li>
	<li id="menu-item-18726" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18726 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-route-reflector" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Route Reflector</span></a></li>
	<li id="menu-item-18727" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18727 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-confederation-explained" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Confederations</span></a></li>
	<li id="menu-item-18728" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18728 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-synchronization" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Synchronization</span></a></li>
	<li id="menu-item-18729" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18729 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-backdoor-routes" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Backdoor Routes</span></a></li>
	<li id="menu-item-18730" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18730 bellows-item-level-1"><a  href="https://networklessons.com/bgp/multiprotocol-bgp-mp-bgp-configuration" class="bellows-target"><span class="bellows-target-title bellows-target-text">MP-BGP (multi-protocol BGP)</span></a></li>
	<li id="menu-item-18731" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18731 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-private-and-public-as-range" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Private and Public AS Numbers</span></a></li>
	<li id="menu-item-18732" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18732 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-remove-private-as" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Remove Private AS Numbers</span></a></li>
	<li id="menu-item-55763" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55763 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-4-byte-number" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP 4-byte AS numbers</span></a></li>
	<li id="menu-item-18733" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18733 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-soft-reset-reconfiguration" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Soft Reconfiguration</span></a></li>
	<li id="menu-item-18734" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-18734 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-route-refresh-capability" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Route Refresh Capability</span></a></li>
	<li id="menu-item-20533" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-20533 bellows-item-level-1"><a  href="https://networklessons.com/bgp/mpls-layer-3-vpn-bgp-allow-as-in" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Allow AS in</span></a></li>
	<li id="menu-item-20534" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-20534 bellows-item-level-1"><a  href="https://networklessons.com/bgp/mpls-layer-3-vpn-bgp-override" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP AS Override</span></a></li>
	<li id="menu-item-55796" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55796 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-aggregate-as-set" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Aggregate AS-SET</span></a></li>
	<li id="menu-item-55810" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55810 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-multipath-load-sharing-ibgp-and-ebgp" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Multipath eBGP and iBGP</span></a></li>
</ul>
</li>
<li id="menu-item-55838" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-has-children bellows-menu-item-55838 bellows-item-level-0"><span  class="bellows-target"><span class="bellows-target-title bellows-target-text">Unit 7: BGP Convergence</span><button class="bellows-subtoggle" aria-label="Toggle Submenu"><i class="bellows-subtoggle-icon-expand fa fa-plus-square"></i><i class="bellows-subtoggle-icon-collapse fa fa-minus-square"></i></button></span>
<ul class="bellows-submenu">
	<li id="menu-item-70464" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-70464 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-route-leaking" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Route Leaking</span></a></li>
	<li id="menu-item-70559" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-70559 bellows-item-level-1"><a  href="https://networklessons.com/bgp/resource-public-key-infrastructure-rpki" class="bellows-target"><span class="bellows-target-title bellows-target-text">Resource Public Key Infrastructure (RPKI)</span></a></li>
	<li id="menu-item-70510" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-70510 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-prefix-origin-as-validation-with-rpki" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Prefix Origin AS Validation with RPKI</span></a></li>
	<li id="menu-item-55972" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55972 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-next-hop-address-tracking" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Next Hop Tracking</span></a></li>
	<li id="menu-item-55837" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55837 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-additional-paths" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP Additional Paths</span></a></li>
	<li id="menu-item-55867" class="bellows-menu-item bellows-menu-item-type-custom bellows-menu-item-object-custom bellows-menu-item-55867 bellows-item-level-1"><a  href="https://networklessons.com/bgp/bgp-pic-prefix-independent-convergence-core-edge" class="bellows-target"><span class="bellows-target-title bellows-target-text">BGP PIC (Prefix Independent Convergence)</span></a></li>
</ul>
</li>
</ul></nav></div></p>
</section>    </aside>
</div>

</div><!-- end .row -->
</div><!-- end .container -->
<div class="container">
<div class="row">

    <div class="col-12">
		
		<div class="cmd_post_nav"><div class="cmd_previous"><a href="https://networklessons.com/bgp/bgp-prefer-ebgp-over-ibgp" rel="prev"><strong>Previous Lesson</strong><br>BGP Prefer eBGP over iBGP</a></div><div class="cmd_next"><a href="https://networklessons.com/bgp/bgp-communities-explained" rel="next"><strong>Next Lesson</strong><br>BGP Communities</a></div></div>	    
        <hr>

		    <div id="comments" class="comments-area discourse-comments-area">
        <h2 class="comments-title discourse-comments-title">Forum Replies</h2>
        <ol class="comment-list">		<li class="comment even depth-1">
			<article class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="Avatar for joseph" src="https://cdn-forum.networklessons.com/user_avatar/forum.networklessons.com/joseph/64/2869_2.png" class="avatar avatar-64 photo avatar-default" height="64" width="64">
						<b class="fn"><a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" rel="external" class="url">joseph</a></b>
						<span class="says screen-reader-text">says:</span><!-- screen reader text -->
					</div>
					<div class="comment-metadata">
						<time datetime=""></time>
					</div>
				</footer>
				<div class="comment-content"><p><p>I’m glad to be the first to say, GREAT LESSON man <img src="https://cdn-forum.networklessons.com/images/emoji/apple/+1.png?v=9" title=":+1:" class="emoji" alt=":+1:"></p></p></div>
			</article>
		</li>
				<li class="comment odd depth-1">
			<article class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="Avatar for ReneMolenaar" src="https://cdn-forum.networklessons.com/user_avatar/forum.networklessons.com/renemolenaar/64/488_2.png" class="avatar avatar-64 photo avatar-default" height="64" width="64">
						<b class="fn"><a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" rel="external" class="url">ReneMolenaar</a></b>
						<span class="says screen-reader-text">says:</span><!-- screen reader text -->
					</div>
					<div class="comment-metadata">
						<time datetime=""></time>
					</div>
				</footer>
				<div class="comment-content"><p><p>Thanks <a class="mention" href="https://forum.networklessons.com/u/joseph">@joseph</a>!</p>
<p>AIGP is easy to configure but it does take time to explain what the issue is with “regular” BGP in a scenario with multiple IGPs, and how things like MED/AS Path won’t fix it.</p>
<p>Rene</p></p></div>
			</article>
		</li>
				<li class="comment even depth-1">
			<article class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="Avatar for joseph" src="https://cdn-forum.networklessons.com/user_avatar/forum.networklessons.com/joseph/64/2869_2.png" class="avatar avatar-64 photo avatar-default" height="64" width="64">
						<b class="fn"><a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" rel="external" class="url">joseph</a></b>
						<span class="says screen-reader-text">says:</span><!-- screen reader text -->
					</div>
					<div class="comment-metadata">
						<time datetime=""></time>
					</div>
				</footer>
				<div class="comment-content"><p><p>One thing Rene, I noticed in the config on R1 at the end of the lesson, there are two route-maps.</p>
<p><p><a href="https://cdn-forum.networklessons.com/uploads/default/original/2X/f/fb033de8b93c91aadef116da5565194265ec59c7.png" target="_blank" rel="nofollow">https://cdn-forum.networklessons.com/uploads/default/original/2X/f/fb033de8b93c91aadef116da5565194265ec59c7.png</a></p></p>
<p>I think the highlighted one needs to be removed.</p></p></div>
			</article>
		</li>
				<li class="comment odd depth-1">
			<article class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="Avatar for lagapidis" src="https://cdn-forum.networklessons.com/user_avatar/forum.networklessons.com/lagapidis/64/4949_2.png" class="avatar avatar-64 photo avatar-default" height="64" width="64">
						<b class="fn"><a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" rel="external" class="url">lagapidis</a></b>
						<span class="says screen-reader-text">says:</span><!-- screen reader text -->
					</div>
					<div class="comment-metadata">
						<time datetime=""></time>
					</div>
				</footer>
				<div class="comment-content"><p><p>Hello Joseph</p>
<p>Yes, I think you are correct!  I’ll let Rene know.</p>
<p>Thanks!</p>
<p>Laz</p></p></div>
			</article>
		</li>
				<li class="comment even depth-1">
			<article class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="Avatar for mandeabhi10" src="https://cdn-forum.networklessons.com/letter_avatar_proxy/v4/letter/m/73ab20/64.png" class="avatar avatar-64 photo avatar-default" height="64" width="64">
						<b class="fn"><a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" rel="external" class="url">mandeabhi10</a></b>
						<span class="says screen-reader-text">says:</span><!-- screen reader text -->
					</div>
					<div class="comment-metadata">
						<time datetime=""></time>
					</div>
				</footer>
				<div class="comment-content"><p><p>Hi Rene,<br>
First of all, thank you very much for sharing this post.</p>
<p>However in section 1.2.1.2, R4 keeping MED 30 and R5 keeping MED 40 they why would AS123 prefers path via R3-R5 ??<br>
Please correct me if I misunderstood anything.</p></p></div>
			</article>
		</li>
		</ol>
        <div class="respond comment-respond">
            <p id="reply-title" class="comment-reply-title"><strong><a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" target="_blank">28 more replies!</a></strong> Ask a question or join the discussion by visiting our <a href="https://forum.networklessons.com/t/accumulated-igp-metric-attribute-aigp/12919" target="_blank">Community Forum</a></p>
        </div>
    </div>
        </div>


		</div>
	</div>

	<footer class="site-footer">
        <div class="container">
            <div class="site-footer-inner">
                <div class="copyright">
                    &copy; 2013 - 2024 NetworkLessons.com 65289                </div>
                <div class="menu-footer-container"><ul id="footer-menu" class="menu"><li id="menu-item-22469" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-22469"><a href="https://networklessons.com/disclaimer">Disclaimer</a></li>
<li id="menu-item-22470" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-22470"><a rel="privacy-policy" href="https://networklessons.com/privacy-policy">Privacy Policy</a></li>
<li id="menu-item-22468" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-22468"><a href="https://networklessons.com/support">Support</a></li>
<li id="menu-item-59827" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-59827"><a href="https://networklessons.com/about-networklessons-com">About</a></li>
</ul></div>            </div>
        </div>
    </footer>
</div>

<script type="text/javascript">var algolia = {"debug":false,"application_id":"JYCQGPKUUY","search_api_key":"294cbcc6c53b2ccb6f80f0410f485afe","powered_by_enabled":false,"query":"","autocomplete":{"sources":[],"input_selector":"input[name='s']:not(.no-autocomplete):not(#adminbar-search)"},"indices":{"searchable_posts":{"name":"wp_searchable_posts","id":"searchable_posts","enabled":true,"replicas":[]}}};</script><link rel='stylesheet' id='tabby-css' href='https://cdn.networklessons.com/wp-content/plugins/tabby-responsive-tabs/css/tabby.css?ver=1.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='tabby-print-css' href='https://cdn.networklessons.com/wp-content/plugins/tabby-responsive-tabs/css/tabby-print.css?ver=1.4.1' type='text/css' media='print' />
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/plugins/duracelltomi-google-tag-manager/dist/js/gtm4wp-form-move-tracker.js?ver=1.20.2" id="gtm4wp-form-move-tracker-js"></script>
<script type="text/javascript" src="https://player.vimeo.com/api/player.js?ver=1.0" id="gtm4wp-vimeo-api-js"></script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/plugins/duracelltomi-google-tag-manager/dist/js/gtm4wp-vimeo.js?ver=1.20.2" id="gtm4wp-vimeo-js"></script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/themes/networklessons/dist/bundle.js?ver=1702771200" id="networklessons-script-js"></script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/themes/networklessons/dist/magnific-popup/jquery.magnific-popup.min.js?ver=1.1.0" id="magnific-popup-jquery-js"></script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/themes/networklessons/dist/magnific-popup/jquery.magnific-popup.js?ver=1.1.0" id="magnific-popup-core-js-js"></script>
<script type="text/javascript" id="bellows-js-extra">
/* <![CDATA[ */
var bellows_data = {"config":{"main":{"folding":"multiple","current":"on","slide_speed":400}},"v":"1.4.3"};
/* ]]> */
</script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/plugins/bellows-pro/assets/js/bellows.min.js?ver=1.4.3" id="bellows-js"></script>
<script type="text/javascript" src="https://cdn.networklessons.com/wp-content/plugins/tabby-responsive-tabs/js/tabby.js?ver=1.4.1" id="tabby-js"></script>
<script type="text/javascript" id="tabby-js-after">
/* <![CDATA[ */
jQuery(document).ready(function($) { RESPONSIVEUI.responsiveTabs(); })
/* ]]> */
</script>

</body>
</html>

<!-- This website is like a Rocket, isn't it? Performance optimized by WP Rocket. Learn more: https://wp-rocket.me -->